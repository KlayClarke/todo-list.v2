(()=>{"use strict";function e(){!function(){let e=document.querySelector("#projects");if(e.innerHTML="",JSON.parse(localStorage.getItem("projects")))for(let o of JSON.parse(localStorage.getItem("projects"))){let c=document.createElement("div");c.classList.add("project"),c.setAttribute("id",o.id),t(o,c),r(c),n(c),d(c,o.id),e.appendChild(c)}}(),function(){let e=document.querySelectorAll(".todos");if(JSON.parse(localStorage.getItem("projects")))for(let t of e)for(let e of JSON.parse(localStorage.getItem("projects")))if(e.id==t.id)for(let r of e.todos){let e=document.createElement("div");e.classList.add("todo"),e.setAttribute("id",r.id),o(r,e),t.appendChild(e)}}()}function t(e,t){let o=document.createElement("p");o.classList.add("project-info"),o.innerHTML=`Complete <b>${e.name}</b> by ${e.dueDate} <br> <hr class='line-break'> ${e.description} `,t.appendChild(o)}function o(e,t){let o=document.createElement("p");o.classList.add("todo-info"),o.innerHTML=`${e.name}`,t.appendChild(o)}function r(e){let t=document.createElement("form");t.classList.add(".todo-form");let o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id",e.id),o.setAttribute("name","todo-name"),o.setAttribute("placeholder","Todo Text");let r=document.createElement("button");r.innerText="Add Todo",r.setAttribute("type","button"),r.setAttribute("id",e.id),r.setAttribute("name","add-todo"),t.appendChild(o),t.appendChild(r),e.appendChild(t)}function n(e){let t=document.createElement("button");t.classList.add("delete-project"),t.setAttribute("id",e.id),t.setAttribute("type","submit"),t.innerHTML="&times;",e.appendChild(t)}function d(e,t){let o=document.createElement("div");o.classList.add("todos"),o.setAttribute("id",t),e.appendChild(o)}let c=function(){let e={projects:[],project:function(t,o="",r){let n={};n.id=Date.now(),n.name=t,n.description=o,n.dueDate=r,n.todos=[],e.projects.push(n)},todo:function(t,o){let r={};r.id=Date.now(),r.name=o;for(let o of e.projects)o.id==t&&o.todos.push(r)}};return e}();function i(t){for(let e of c.projects)e.id==t.target.id&&(c.projects=c.projects.filter((t=>t!==e)),localStorage.setItem("projects",JSON.stringify(c.projects)));e(),window.location.reload()}function l(t){let o=document.querySelectorAll("input[name='todo-name']");for(let e of o)for(let o of c.projects)e.id==t.target.id&&o.id==t.target.id&&(c.todo(o.id,e.value),localStorage.setItem("projects",JSON.stringify(c.projects)));e(),window.location.reload()}localStorage.getItem("projects")||localStorage.setItem("projects",JSON.stringify(c.projects)),c.projects=JSON.parse(localStorage.getItem("projects")),e(),console.log(c.projects);let a=document.querySelector("button[name='create-project']"),s=document.querySelectorAll("button.delete-project"),u=document.querySelectorAll("button[name='add-todo']");a.addEventListener("click",(function(){let t=document.querySelector("input[name='project-name']"),o=document.querySelector("textarea[name='project-description']"),r=document.querySelector("input[name='project-due-date']");if(t.value&&r.value){c.project(t.value,o.value,r.value);for(let e of[t,o,r])e.value="";localStorage.setItem("projects",JSON.stringify(c.projects)),e(),window.location.reload()}})),s.forEach((e=>e.addEventListener("click",i))),u.forEach((e=>e.addEventListener("click",l)))})();